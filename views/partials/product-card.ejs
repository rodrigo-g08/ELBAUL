<div class="card product-card h-100">
    <div class="position-relative">
        <img src="<%= product.imagenes && product.imagenes.length > 0 ? product.imagenes[0] : '/img/placeholder.jpg' %>" 
             class="card-img-top product-image" alt="<%= product.titulo %>">
        <button class="btn btn-outline-danger btn-sm position-absolute top-0 end-0 m-2 favorite-btn" 
                data-product-id="<%= product.producto_id %>" onclick="toggleFavorite('<%= product.producto_id %>')">
            <i class="far fa-heart"></i>
        </button>
        <span class="badge bg-secondary position-absolute top-0 start-0 m-2"><%= product.estado %></span>
    </div>
    <div class="card-body">
        <h6 class="card-title"><%= product.titulo %></h6>
        <p class="card-text text-muted small"><%= product.descripcion.substring(0, 100) %>...</p>
        <div class="d-flex justify-content-between align-items-center mb-2">
            <span class="product-price h5 mb-0">S/ <%= product.precio %></span>
            <small class="text-muted"><%= product.categoria ? product.categoria.nombre : '' %></small>
        </div>
    </div>
    <div class="card-footer bg-transparent">
        <div class="d-grid gap-2">
            <a href="/productos/<%= product.producto_id %>" class="btn btn-primary btn-sm">
                <i class="fas fa-eye me-1"></i>Ver Detalles
            </a>
            <button class="btn btn-success btn-sm" onclick="addToCart('<%= product.producto_id %>')">
                <i class="fas fa-cart-plus me-1"></i>Agregar al Carrito
            </button>
        </div>
    </div>
</div>